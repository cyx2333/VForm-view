"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[1741],{91741:function(t,s,e){e(44114);class i{constructor(t){this.$editor=t;var s=this,e=[],i=!1;this.onAfterExec=function(){i=!1,s.processRows(e),e=[]},this.onExec=function(){i=!0},this.onChange=function(t){i&&(-1==e.indexOf(t.start.row)&&e.push(t.start.row),t.end.row!=t.start.row&&e.push(t.end.row))}}processRows(t){this.$inChange=!0;for(var s=[],e=0,i=t.length;e<i;e++){var o=t[e];if(!(s.indexOf(o)>-1))for(var r=this.$findCellWidthsForBlock(o),n=this.$setBlockCellWidthsToMax(r.cellWidths),h=r.firstRow,a=0,l=n.length;a<l;a++){var c=n[a];s.push(h),this.$adjustRow(h,c),h++}}this.$inChange=!1}$findCellWidthsForBlock(t){var s,e=[],i=t;while(i>=0){if(s=this.$cellWidthsForRow(i),0==s.length)break;e.unshift(s),i--}var o=i+1;i=t;var r=this.$editor.session.getLength();while(i<r-1){if(i++,s=this.$cellWidthsForRow(i),0==s.length)break;e.push(s)}return{cellWidths:e,firstRow:o}}$cellWidthsForRow(t){for(var s=this.$selectionColumnsForRow(t),e=[-1].concat(this.$tabsForRow(t)),i=e.map((function(t){return 0})).slice(1),o=this.$editor.session.getLine(t),r=0,n=e.length-1;r<n;r++){var h=e[r]+1,a=e[r+1],l=this.$rightmostSelectionInCell(s,a),c=o.substring(h,a);i[r]=Math.max(c.replace(/\s+$/g,"").length,l-h)}return i}$selectionColumnsForRow(t){var s=[],e=this.$editor.getCursorPosition();return this.$editor.session.getSelection().isEmpty()&&t==e.row&&s.push(e.column),s}$setBlockCellWidthsToMax(t){for(var s,e,i,o=!0,r=this.$izip_longest(t),n=0,h=r.length;n<h;n++){var a=r[n];if(a.push){a.push(NaN);for(var l=0,c=a.length;l<c;l++){var u=a[l];if(o&&(s=l,i=0,o=!1),isNaN(u)){e=l;for(var g=s;g<e;g++)t[g][n]=i;o=!0}i=Math.max(i,u)}}else console.error(a)}return t}$rightmostSelectionInCell(t,s){var e=0;if(t.length){for(var i=[],o=0,r=t.length;o<r;o++)t[o]<=s?i.push(o):i.push(0);e=Math.max.apply(Math,i)}return e}$tabsForRow(t){var s,e=[],i=this.$editor.session.getLine(t),o=/\t/g;while(null!=(s=o.exec(i)))e.push(s.index);return e}$adjustRow(t,s){var e=this.$tabsForRow(t);if(0!=e.length)for(var i=0,o=-1,r=this.$izip(s,e),n=0,h=r.length;n<h;n++){var a=r[n][0],l=r[n][1];o+=1+a,l+=i;var c=o-l;if(0!=c){var u=this.$editor.session.getLine(t).substr(0,l),g=u.replace(/\s*$/g,""),p=u.length-g.length;c>0&&(this.$editor.session.getDocument().insertInLine({row:t,column:l+1},Array(c+1).join(" ")+"\t"),this.$editor.session.getDocument().removeInLine(t,l,l+1),i+=c),c<0&&p>=-c&&(this.$editor.session.getDocument().removeInLine(t,l+c,l),i+=c)}}}$izip_longest(t){if(!t[0])return[];for(var s=t[0].length,e=t.length,i=1;i<e;i++){var o=t[i].length;o>s&&(s=o)}for(var r=[],n=0;n<s;n++){var h=[];for(i=0;i<e;i++)""===t[i][n]?h.push(NaN):h.push(t[i][n]);r.push(h)}return r}$izip(t,s){for(var e=t.length>=s.length?s.length:t.length,i=[],o=0;o<e;o++){var r=[t[o],s[o]];i.push(r)}return i}}s.ElasticTabstopsLite=i;var o=e(6371).K;e(19008).defineOptions(o.prototype,"editor",{useElasticTabstops:{set:function(t){t?(this.elasticTabstops||(this.elasticTabstops=new i(this)),this.commands.on("afterExec",this.elasticTabstops.onAfterExec),this.commands.on("exec",this.elasticTabstops.onExec),this.on("change",this.elasticTabstops.onChange)):this.elasticTabstops&&(this.commands.removeListener("afterExec",this.elasticTabstops.onAfterExec),this.commands.removeListener("exec",this.elasticTabstops.onExec),this.removeListener("change",this.elasticTabstops.onChange))}}})}}]);
//# sourceMappingURL=1741.62fc5b67.js.map