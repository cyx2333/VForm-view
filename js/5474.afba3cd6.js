(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[5474,2463],{72463:function(e,t,i){i(44114);var o=i(84507).m_,s=i(74753).b,n=i(8358),r=i(44104),h=i(41218),l=i(34084),d="command_bar_tooltip_button",a="command_bar_button_value",c="command_bar_button_caption",p="command_bar_keybinding",m="command_bar_tooltip",u="MoreOptionsButton",g=100,f=4,b=function(e,t){return t.row>e.row||t.row===e.row&&t.column>e.column?e:t},v={Ctrl:{mac:"^"},Option:{mac:"⌥"},Command:{mac:"⌘"},Cmd:{mac:"⌘"},Shift:"⇧",Left:"←",Right:"→",Up:"↑",Down:"↓"};class ${constructor(e,t){for(var i of(t=t||{},this.parentNode=e,this.tooltip=new o(this.parentNode),this.moreOptions=new o(this.parentNode),this.maxElementsOnTooltip=t.maxElementsOnTooltip||f,this.$alwaysShow=t.alwaysShow||!1,this.eventListeners={},this.elements={},this.commands={},this.tooltipEl=r.buildDom(["div",{class:m}],this.tooltip.getElement()),this.moreOptionsEl=r.buildDom(["div",{class:m+" tooltip_more_options"}],this.moreOptions.getElement()),this.$showTooltipTimer=n.delayedCall(this.$showTooltip.bind(this),t.showDelay||g),this.$hideTooltipTimer=n.delayedCall(this.$hideTooltip.bind(this),t.hideDelay||g),this.$tooltipEnter=this.$tooltipEnter.bind(this),this.$onMouseMove=this.$onMouseMove.bind(this),this.$onChangeScroll=this.$onChangeScroll.bind(this),this.$onEditorChangeSession=this.$onEditorChangeSession.bind(this),this.$scheduleTooltipForHide=this.$scheduleTooltipForHide.bind(this),this.$preventMouseEvent=this.$preventMouseEvent.bind(this),["mousedown","mouseup","click"]))this.tooltip.getElement().addEventListener(i,this.$preventMouseEvent),this.moreOptions.getElement().addEventListener(i,this.$preventMouseEvent)}registerCommand(e,t){var i=Object.keys(this.commands).length<this.maxElementsOnTooltip;i||this.elements[u]||this.$createCommand(u,{name:"···",exec:function(){this.$shouldHideMoreOptions=!1,this.$setMoreOptionsVisibility(!this.isMoreOptionsShown())}.bind(this),type:"checkbox",getValue:function(){return this.isMoreOptionsShown()}.bind(this),enabled:!0},!0),this.$createCommand(e,t,i),this.isShown()&&this.updatePosition()}isShown(){return!!this.tooltip&&this.tooltip.isOpen}isMoreOptionsShown(){return!!this.moreOptions&&this.moreOptions.isOpen}getAlwaysShow(){return this.$alwaysShow}setAlwaysShow(e){this.$alwaysShow=e,this.$updateOnHoverHandlers(!this.$alwaysShow),this._signal("alwaysShow",this.$alwaysShow)}attach(e){!e||this.isShown()&&this.editor===e||(this.detach(),this.editor=e,this.editor.on("changeSession",this.$onEditorChangeSession),this.editor.session&&(this.editor.session.on("changeScrollLeft",this.$onChangeScroll),this.editor.session.on("changeScrollTop",this.$onChangeScroll)),this.getAlwaysShow()?this.$showTooltip():this.$updateOnHoverHandlers(!0))}updatePosition(){if(this.editor){var e,t=this.editor.renderer;if(e=this.editor.selection.getAllRanges?this.editor.selection.getAllRanges():[this.editor.getSelectionRange()],e.length){for(var i,o=b(e[0].start,e[0].end),s=0;i=e[s];s++)o=b(o,b(i.start,i.end));var n=t.$cursorLayer.getPixelPosition(o,!0),r=this.tooltip.getElement(),h=window.innerWidth,l=window.innerHeight,d=this.editor.container.getBoundingClientRect();n.top+=d.top-t.layerConfig.offset,n.left+=d.left+t.gutterWidth-t.scrollLeft;var a=n.top>=d.top&&n.top<=d.bottom&&n.left>=d.left+t.gutterWidth&&n.left<=d.right;if(a||!this.isShown())if(a&&!this.isShown()&&this.getAlwaysShow())this.$showTooltip();else{var c=n.top-r.offsetHeight,p=Math.min(h-r.offsetWidth,n.left),m=c>=0&&c+r.offsetHeight<=l&&p>=0&&p+r.offsetWidth<=h;if(m){if(this.tooltip.setPosition(p,c),this.isMoreOptionsShown()){c+=r.offsetHeight,p=this.elements[u].getBoundingClientRect().left;var g=this.moreOptions.getElement();l=window.innerHeight;c+g.offsetHeight>l&&(c-=r.offsetHeight+g.offsetHeight),p+g.offsetWidth>h&&(p=h-g.offsetWidth),this.moreOptions.setPosition(p,c)}}else this.$hideTooltip()}else this.$hideTooltip()}}}update(){Object.keys(this.elements).forEach(this.$updateElement.bind(this))}detach(){this.tooltip.hide(),this.moreOptions.hide(),this.$updateOnHoverHandlers(!1),this.editor&&(this.editor.off("changeSession",this.$onEditorChangeSession),this.editor.session&&(this.editor.session.off("changeScrollLeft",this.$onChangeScroll),this.editor.session.off("changeScrollTop",this.$onChangeScroll))),this.$mouseInTooltip=!1,this.editor=null}destroy(){this.tooltip&&this.moreOptions&&(this.detach(),this.tooltip.destroy(),this.moreOptions.destroy()),this.eventListeners={},this.commands={},this.elements={},this.tooltip=this.moreOptions=this.parentNode=null}$createCommand(e,t,i){var o,s=i?this.tooltipEl:this.moreOptionsEl,n=[],h=t.bindKey;h&&("object"===typeof h&&(h=l.isMac?h.mac:h.win),h=h.split("|")[0],n=h.split("-"),n=n.map((function(e){if(v[e]){if("string"===typeof v[e])return v[e];if(l.isMac&&v[e].mac)return v[e].mac}return e}))),i&&t.iconCssClass?o=["div",{class:["ace_icon_svg",t.iconCssClass].join(" "),"aria-label":t.name+" ("+t.bindKey+")"}]:(o=[["div",{class:a}],["div",{class:c},t.name]],n.length&&o.push(["div",{class:p},n.map((function(e){return["div",e]}))])),r.buildDom(["div",{class:[d,t.cssClass||""].join(" "),ref:e},o],s,this.elements),this.commands[e]=t;var m=function(i){this.editor&&this.editor.focus(),this.$shouldHideMoreOptions=this.isMoreOptionsShown(),!this.elements[e].disabled&&t.exec&&t.exec(this.editor),this.$shouldHideMoreOptions&&this.$setMoreOptionsVisibility(!1),this.update(),i.preventDefault()}.bind(this);this.eventListeners[e]=m,this.elements[e].addEventListener("click",m.bind(this)),this.$updateElement(e)}$setMoreOptionsVisibility(e){e?(this.moreOptions.setTheme(this.editor.renderer.theme),this.moreOptions.setClassName(m+"_wrapper"),this.moreOptions.show(),this.update(),this.updatePosition()):this.moreOptions.hide()}$onEditorChangeSession(e){e.oldSession&&(e.oldSession.off("changeScrollTop",this.$onChangeScroll),e.oldSession.off("changeScrollLeft",this.$onChangeScroll)),this.detach()}$onChangeScroll(){this.editor.renderer&&(this.isShown()||this.getAlwaysShow())&&this.editor.renderer.once("afterRender",this.updatePosition.bind(this))}$onMouseMove(e){if(!this.$mouseInTooltip){var t=this.editor.getCursorPosition(),i=this.editor.renderer.textToScreenCoordinates(t.row,t.column),o=this.editor.renderer.lineHeight,s=e.clientY>=i.pageY&&e.clientY<i.pageY+o;s?(this.isShown()||this.$showTooltipTimer.isPending()||this.$showTooltipTimer.delay(),this.$hideTooltipTimer.isPending()&&this.$hideTooltipTimer.cancel()):(this.isShown()&&!this.$hideTooltipTimer.isPending()&&this.$hideTooltipTimer.delay(),this.$showTooltipTimer.isPending()&&this.$showTooltipTimer.cancel())}}$preventMouseEvent(e){this.editor&&this.editor.focus(),e.preventDefault()}$scheduleTooltipForHide(){this.$mouseInTooltip=!1,this.$showTooltipTimer.cancel(),this.$hideTooltipTimer.delay()}$tooltipEnter(){this.$mouseInTooltip=!0,this.$showTooltipTimer.isPending()&&this.$showTooltipTimer.cancel(),this.$hideTooltipTimer.isPending()&&this.$hideTooltipTimer.cancel()}$updateOnHoverHandlers(e){var t=this.tooltip.getElement(),i=this.moreOptions.getElement();e?(this.editor&&(this.editor.on("mousemove",this.$onMouseMove),this.editor.renderer.getMouseEventTarget().addEventListener("mouseout",this.$scheduleTooltipForHide,!0)),t.addEventListener("mouseenter",this.$tooltipEnter),t.addEventListener("mouseleave",this.$scheduleTooltipForHide),i.addEventListener("mouseenter",this.$tooltipEnter),i.addEventListener("mouseleave",this.$scheduleTooltipForHide)):(this.editor&&(this.editor.off("mousemove",this.$onMouseMove),this.editor.renderer.getMouseEventTarget().removeEventListener("mouseout",this.$scheduleTooltipForHide,!0)),t.removeEventListener("mouseenter",this.$tooltipEnter),t.removeEventListener("mouseleave",this.$scheduleTooltipForHide),i.removeEventListener("mouseenter",this.$tooltipEnter),i.removeEventListener("mouseleave",this.$scheduleTooltipForHide))}$showTooltip(){this.isShown()||(this.tooltip.setTheme(this.editor.renderer.theme),this.tooltip.setClassName(m+"_wrapper"),this.tooltip.show(),this.update(),this.updatePosition(),this._signal("show"))}$hideTooltip(){this.$mouseInTooltip=!1,this.isShown()&&(this.moreOptions.hide(),this.tooltip.hide(),this._signal("hide"))}$updateElement(e){var t=this.commands[e];if(t){var i=this.elements[e],o=t.enabled;if("function"===typeof o&&(o=o(this.editor)),"function"===typeof t.getValue){var s=t.getValue(this.editor);if("text"===t.type)i.textContent=s;else if("checkbox"===t.type){var n=s?r.addCssClass:r.removeCssClass,h=i.parentElement===this.tooltipEl;i.ariaChecked=s,h?n(i,"ace_selected"):(i=i.querySelector("."+a),n(i,"ace_checkmark"))}}o&&i.disabled?(r.removeCssClass(i,"ace_disabled"),i.ariaDisabled=i.disabled=!1,i.removeAttribute("disabled")):o||i.disabled||(r.addCssClass(i,"ace_disabled"),i.ariaDisabled=i.disabled=!0,i.setAttribute("disabled",""))}}}h.implement($.prototype,s),r.importCssString(`\n.ace_tooltip.${m}_wrapper {\n    padding: 0;\n}\n\n.ace_tooltip .${m} {\n    padding: 1px 5px;\n    display: flex;\n    pointer-events: auto;\n}\n\n.ace_tooltip .${m}.tooltip_more_options {\n    padding: 1px;\n    flex-direction: column;\n}\n\ndiv.${d} {\n    display: inline-flex;\n    cursor: pointer;\n    margin: 1px;\n    border-radius: 2px;\n    padding: 2px 5px;\n    align-items: center;\n}\n\ndiv.${d}.ace_selected,\ndiv.${d}:hover:not(.ace_disabled) {\n    background-color: rgba(0, 0, 0, 0.1);\n}\n\ndiv.${d}.ace_disabled {\n    color: #777;\n    pointer-events: none;\n}\n\ndiv.${d} .ace_icon_svg {\n    height: 12px;\n    background-color: #000;\n}\n\ndiv.${d}.ace_disabled .ace_icon_svg {\n    background-color: #777;\n}\n\n.${m}.tooltip_more_options .${d} {\n    display: flex;\n}\n\n.${m}.${a} {\n    display: none;\n}\n\n.${m}.tooltip_more_options .${a} {\n    display: inline-block;\n    width: 12px;\n}\n\n.${c} {\n    display: inline-block;\n}\n\n.${p} {\n    margin: 0 2px;\n    display: inline-block;\n    font-size: 8px;\n}\n\n.${m}.tooltip_more_options .${p} {\n    margin-left: auto;\n}\n\n.${p} div {\n    display: inline-block;\n    min-width: 8px;\n    padding: 2px;\n    margin: 0 1px;\n    border-radius: 2px;\n    background-color: #ccc;\n    text-align: center;\n}\n\n.ace_dark.ace_tooltip .${m} {\n    background-color: #373737;\n    color: #eee;\n}\n\n.ace_dark div.${d}.ace_disabled {\n    color: #979797;\n}\n\n.ace_dark div.${d}.ace_selected,\n.ace_dark div.${d}:hover:not(.ace_disabled) {\n    background-color: rgba(255, 255, 255, 0.1);\n}\n\n.ace_dark div.${d} .ace_icon_svg {\n    background-color: #eee;\n}\n\n.ace_dark div.${d}.ace_disabled .ace_icon_svg {\n    background-color: #979797;\n}\n\n.ace_dark .${d}.ace_disabled {\n    color: #979797;\n}\n\n.ace_dark .${p} div {\n    background-color: #575757;\n}\n\n.ace_checkmark::before {\n    content: '✓';\n}\n`,"commandbar.css",!1),t.CommandBarTooltip=$,t.TOOLTIP_CLASS_NAME=m,t.BUTTON_CLASS_NAME=d},85474:function(e,t,i){"use strict";var o=i(90605).HashHandler,s=i(72644).V,n=i(22026).C3,r=i(22026).o2,h=i(6371).K,l=i(62161),d=i(44104),a=i(8358),c=i(72463).CommandBarTooltip,p=i(72463).BUTTON_CLASS_NAME,m=i(66324).snippetCompleter,u=i(66324).textCompleter,g=i(66324).keyWordCompleter,f=function(e,t){t.completer&&t.completer.destroy()};class b{constructor(e){this.editor=e,this.keyboardHandler=new o(this.commands),this.$index=-1,this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.changeTimer=a.delayedCall(function(){this.updateCompletions()}.bind(this))}getInlineRenderer(){return this.inlineRenderer||(this.inlineRenderer=new s),this.inlineRenderer}getInlineTooltip(){return this.inlineTooltip||(this.inlineTooltip=b.createInlineTooltip(document.body||document.documentElement)),this.inlineTooltip}show(e){this.activated=!0,this.editor.completer!==this&&(this.editor.completer&&this.editor.completer.detach(),this.editor.completer=this),this.editor.on("changeSelection",this.changeListener),this.editor.on("blur",this.blurListener),this.updateCompletions(e)}$open(){this.editor.textInput.setAriaOptions&&this.editor.textInput.setAriaOptions({}),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.getInlineTooltip().attach(this.editor),-1===this.$index?this.setIndex(0):this.$showCompletion(),this.changeTimer.cancel()}insertMatch(){var e=this.getCompletionProvider().insertByIndex(this.editor,this.$index);return this.detach(),e}changeListener(e){var t=this.editor.selection.lead;(t.row!=this.base.row||t.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()}blurListener(e){this.detach()}goTo(e){if(this.completions&&this.completions.filtered){var t=this.completions.filtered.length;switch(e.toLowerCase()){case"prev":this.setIndex((this.$index-1+t)%t);break;case"next":this.setIndex((this.$index+1+t)%t);break;case"first":this.setIndex(0);break;case"last":this.setIndex(this.completions.filtered.length-1);break}}}getLength(){return this.completions&&this.completions.filtered?this.completions.filtered.length:0}getData(e){return void 0==e||null===e?this.completions.filtered[this.$index]:this.completions.filtered[e]}getIndex(){return this.$index}isOpen(){return this.$index>=0}setIndex(e){if(this.completions&&this.completions.filtered){var t=Math.max(-1,Math.min(this.completions.filtered.length-1,e));t!==this.$index&&(this.$index=t,this.$showCompletion())}}getCompletionProvider(e){return this.completionProvider||(this.completionProvider=new r(e)),this.completionProvider}$showCompletion(){this.getInlineRenderer().show(this.editor,this.completions.filtered[this.$index],this.completions.filterText)||this.getInlineRenderer().hide(),this.inlineTooltip&&this.inlineTooltip.isShown()&&this.inlineTooltip.update()}$updatePrefix(){var e=this.editor.getCursorPosition(),t=this.editor.session.getTextRange({start:this.base,end:e});return this.completions.setFilter(t),this.completions.filtered.length&&(1!=this.completions.filtered.length||this.completions.filtered[0].value!=t||this.completions.filtered[0].snippet)?(this.$open(this.editor,t),t):this.detach()}updateCompletions(e){var t="";if(e&&e.matches){var i=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(i.row,i.column),this.base.$insertRight=!0,this.completions=new n(e.matches),this.$open(this.editor,"")}this.base&&this.completions&&(t=this.$updatePrefix());var o=this.editor.getSession();i=this.editor.getCursorPosition(),t=l.getCompletionPrefix(this.editor);this.base=o.doc.createAnchor(i.row,i.column-t.length),this.base.$insertRight=!0;e={exactMatch:!0,ignoreCaption:!0};this.getCompletionProvider({prefix:t,base:this.base,pos:i}).provideCompletions(this.editor,e,function(e,t,i){var o=t.filtered,s=l.getCompletionPrefix(this.editor);if(i){if(!o.length)return this.detach();if(1==o.length&&o[0].value==s&&!o[0].snippet)return this.detach()}this.completions=t,this.$open(this.editor,s)}.bind(this))}detach(){this.editor&&(this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener)),this.changeTimer.cancel(),this.inlineTooltip&&this.inlineTooltip.detach(),this.setIndex(-1),this.completionProvider&&this.completionProvider.detach(),this.inlineRenderer&&this.inlineRenderer.isOpen()&&this.inlineRenderer.hide(),this.base&&this.base.detach(),this.activated=!1,this.completionProvider=this.completions=this.base=null}destroy(){this.detach(),this.inlineRenderer&&this.inlineRenderer.destroy(),this.inlineTooltip&&this.inlineTooltip.destroy(),this.editor&&this.editor.completer==this&&(this.editor.off("destroy",f),this.editor.completer=null),this.inlineTooltip=this.editor=this.inlineRenderer=null}updateDocTooltip(){}}b.prototype.commands={Previous:{bindKey:"Alt-[",name:"Previous",exec:function(e){e.completer.goTo("prev")}},Next:{bindKey:"Alt-]",name:"Next",exec:function(e){e.completer.goTo("next")}},Accept:{bindKey:{win:"Tab|Ctrl-Right",mac:"Tab|Cmd-Right"},name:"Accept",exec:function(e){return e.completer.insertMatch()}},Close:{bindKey:"Esc",name:"Close",exec:function(e){e.completer.detach()}}},b.for=function(e){return e.completer instanceof b||(e.completer&&(e.completer.destroy(),e.completer=null),e.completer=new b(e),e.once("destroy",f)),e.completer},b.startCommand={name:"startInlineAutocomplete",exec:function(e,t){var i=b.for(e);i.show(t)},bindKey:{win:"Alt-C",mac:"Option-C"}};var v=[m,u,g];i(19008).defineOptions(h.prototype,"editor",{enableInlineAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:v),this.commands.addCommand(b.startCommand)):this.commands.removeCommand(b.startCommand)},value:!1}}),b.createInlineTooltip=function(e){var t=new c(e);return t.registerCommand("Previous",Object.assign({},b.prototype.commands["Previous"],{enabled:!0,type:"button",iconCssClass:"ace_arrow_rotated"})),t.registerCommand("Position",{enabled:!1,getValue:function(e){return e?[e.completer.getIndex()+1,e.completer.getLength()].join("/"):""},type:"text",cssClass:"completion_position"}),t.registerCommand("Next",Object.assign({},b.prototype.commands["Next"],{enabled:!0,type:"button",iconCssClass:"ace_arrow"})),t.registerCommand("Accept",Object.assign({},b.prototype.commands["Accept"],{enabled:function(e){return!!e&&e.completer.getIndex()>=0},type:"button"})),t.registerCommand("ShowTooltip",{name:"Always Show Tooltip",exec:function(){t.setAlwaysShow(!t.getAlwaysShow())},enabled:!0,getValue:function(){return t.getAlwaysShow()},type:"checkbox"}),t},d.importCssString(`\n\n.ace_icon_svg.ace_arrow,\n.ace_icon_svg.ace_arrow_rotated {\n    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODM3MDEgMTVMNC41ODc1MSAxMy43MTU1TDEwLjE0NjggOEw0LjU4NzUxIDIuMjg0NDZMNS44MzcwMSAxTDEyLjY0NjUgOEw1LjgzNzAxIDE1WiIgZmlsbD0iYmxhY2siLz48L3N2Zz4=");\n}\n\n.ace_icon_svg.ace_arrow_rotated {\n    transform: rotate(180deg);\n}\n\ndiv.${p}.completion_position {\n    padding: 0;\n}\n`,"inlineautocomplete.css",!1),t.InlineAutocomplete=b}}]);
//# sourceMappingURL=5474.afba3cd6.js.map