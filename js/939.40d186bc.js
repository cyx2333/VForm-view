"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[939],{60939:function(e,t,a){var r=a(46458).TokenIterator;function s(e,t){return e.type.lastIndexOf(t+".xml")>-1}t.singletonTags=["area","base","br","col","command","embed","hr","html","img","input","keygen","link","meta","param","source","track","wbr"],t.blockTags=["article","aside","blockquote","body","div","dl","fieldset","footer","form","head","header","html","nav","ol","p","script","section","style","table","tbody","tfoot","thead","ul"],t.formatOptions={lineBreaksAfterCommasInCurlyBlock:!0},t.beautify=function(e){var a,n,o,i=new r(e,0,0),c=i.getCurrentToken(),l=e.getTabString(),m=t.singletonTags,u=t.blockTags,p=t.formatOptions||{},f=!1,h=!1,y=!1,g="",b="",d="",k=0,$=0,w=0,v=0,x=0,C=0,T=0,R=0,B=0,O=!1,I=!1,q=!1,A=!1,F={0:0},S=[],K=!1,L=function(){a&&a.value&&"string.regexp"!==a.type&&(a.value=a.value.replace(/^\s*/,""))},V=function(){var e=g.length-1;while(1){if(0==e)break;if(" "!==g[e])break;e-=1}g=g.slice(0,e+1)},_=function(){g=g.trimRight(),f=!1};while(null!==c){if(R=i.getCurrentTokenRow(),i.$rowTokens,a=i.stepForward(),"undefined"!==typeof c){if(b=c.value,x=0,q="style"===d||"ace/mode/css"===e.$modeId,s(c,"tag-open")?(I=!0,a&&(A=-1!==u.indexOf(a.value)),"</"===b&&(A&&!f&&B<1&&B++,q&&(B=1),x=1,A=!1)):s(c,"tag-close")?I=!1:s(c,"comment.start")?A=!0:s(c,"comment.end")&&(A=!1),I||B||"paren.rparen"!==c.type||"}"!==c.value.substr(0,1)||B++,R!==n&&(B=R,n&&(B-=n)),B){for(_();B>0;B--)g+="\n";f=!0,s(c,"comment")||c.type.match(/^(comment|string)$/)||(b=b.trimLeft())}if(b){if("keyword"===c.type&&b.match(/^(if|else|elseif|for|foreach|while|switch)$/)?(S[k]=b,L(),y=!0,b.match(/^(else|elseif)$/)&&g.match(/\}[\s]*$/)&&(_(),h=!0)):"paren.lparen"===c.type?(L(),"{"===b.substr(-1)&&(y=!0,O=!1,I||(B=1)),"{"===b.substr(0,1)&&(h=!0,"["!==g.substr(-1)&&"["===g.trimRight().substr(-1)?(_(),h=!1):")"===g.trimRight().substr(-1)?_():V())):"paren.rparen"===c.type?(x=1,"}"===b.substr(0,1)&&("case"===S[k-1]&&x++,"{"===g.trimRight().substr(-1)?_():(h=!0,q&&(B+=2))),"]"===b.substr(0,1)&&"}"!==g.substr(-1)&&"}"===g.trimRight().substr(-1)&&(h=!1,v++,_()),")"===b.substr(0,1)&&"("!==g.substr(-1)&&"("===g.trimRight().substr(-1)&&(h=!1,v++,_()),V()):"keyword.operator"!==c.type&&"keyword"!==c.type||!b.match(/^(=|==|===|!=|!==|&&|\|\||and|or|xor|\+=|.=|>|>=|<|<=|=>)$/)?"punctuation.operator"===c.type&&";"===b?(_(),L(),y=!0,q&&B++):"punctuation.operator"===c.type&&b.match(/^(:|,)$/)?(_(),L(),b.match(/^(,)$/)&&T>0&&0===C&&p.lineBreaksAfterCommasInCurlyBlock?B++:(y=!0,f=!1)):"support.php_tag"!==c.type||"?>"!==b||f?s(c,"attribute-name")&&g.substr(-1).match(/^\s$/)?h=!0:s(c,"attribute-equals")?(V(),L()):s(c,"tag-close")?(V(),"/>"===b&&(h=!0)):"keyword"===c.type&&b.match(/^(case|default)$/)&&K&&(x=1):(_(),h=!0):(_(),L(),h=!0,y=!0),f&&(!c.type.match(/^(comment)$/)||b.substr(0,1).match(/^[/#]$/))&&(!c.type.match(/^(string)$/)||b.substr(0,1).match(/^['"@]$/))){if(v=w,k>$)for(v++,o=k;o>$;o--)F[o]=v;else k<$&&(v=F[k]);for($=k,w=v,x&&(v-=x),O&&!C&&(v++,O=!1),o=0;o<v;o++)g+=l}if("keyword"===c.type&&b.match(/^(case|default)$/)?!1===K&&(S[k]=b,k++,K=!0):"keyword"===c.type&&b.match(/^(break)$/)&&S[k-1]&&S[k-1].match(/^(case|default)$/)&&(k--,K=!1),"paren.lparen"===c.type&&(C+=(b.match(/\(/g)||[]).length,T+=(b.match(/\{/g)||[]).length,k+=b.length),"keyword"===c.type&&b.match(/^(if|else|elseif|for|while)$/)?(O=!0,C=0):!C&&b.trim()&&"comment"!==c.type&&(O=!1),"paren.rparen"===c.type)for(C-=(b.match(/\)/g)||[]).length,T-=(b.match(/\}/g)||[]).length,o=0;o<b.length;o++)k--,"}"===b.substr(o,1)&&"case"===S[k]&&k--;"text"==c.type&&(b=b.replace(/\s+$/," ")),h&&!f&&(V(),"\n"!==g.substr(-1)&&(g+=" ")),g+=b,y&&(g+=" "),f=!1,h=!1,y=!1,(s(c,"tag-close")&&(A||-1!==u.indexOf(d))||s(c,"doctype")&&">"===b)&&(B=A&&a&&"</"===a.value?-1:1),a&&-1===m.indexOf(a.value)&&(s(c,"tag-open")&&"</"===b?k--:s(c,"tag-open")&&"<"===b?k++:s(c,"tag-close")&&"/>"===b&&k--),s(c,"tag-name")&&(d=b),n=R}}c=a}g=g.trim(),e.doc.setValue(g)},t.commands=[{name:"beautify",description:"Format selection (Beautify)",exec:function(e){t.beautify(e.session)},bindKey:"Ctrl-Shift-B"}]}}]);
//# sourceMappingURL=939.40d186bc.js.map